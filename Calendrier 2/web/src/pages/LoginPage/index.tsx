// eslint-disable-next-line no-unused-vars
import React, { useState, FormEvent } from 'react'
import { useHistory, Link } from 'react-router-dom'

import useAuth from '../../contexts/auth'

import googleLogo from '../../assets/images/icons/google-logo.svg'
import facebookLogo from '../../assets/images/icons/facebook-logo.svg'
import { User, Lock, Eye, EyeOff, Square, CheckSquare, LogIn } from 'react-feather'

import './styles.css'

const LoginPage: React.FC = () => {
  const history = useHistory()
  const { logIn } = useAuth()

  const [email, setEmail] = useState('')
  const [password, setPassword] = useState('')

  const [seePassword, setSeePassword] = useState(false)
  const [errorMessage, setErrorMessage] = useState('')
  const [rememberPassword, setRememberPassword] = useState(false)

  const handleFormSubmit = async (e: FormEvent) => {
    e.preventDefault()

    const loginStatus = await logIn(email, password)

    if (loginStatus.login === 1) {
      history.push('/landing')
    } else if (loginStatus.msg === 'param error') {
      setErrorMessage('Invalid value')
    } else if (loginStatus.msg === 'db error -> response.length < 1') {
      setErrorMessage('User not found. Try to create an account!')
    } else if (loginStatus.msg === 'db error -> response.length > 1') {
      setErrorMessage('Unknown server error. Try again later!')
    } else if (loginStatus.msg === 'incorrect password') {
      setErrorMessage('Incorrect password. Try again!')
    } else if (loginStatus.msg === 'unknown error') {
      setErrorMessage('Unknown error. Try again later!')
    } else {
      setErrorMessage('Something went wrong. Try again later!')
    }
  }

  return (
    <div id="LoginPageContainer">

      <div id="Left">
        {/* CalendrierLogo */}
        <svg id="calendrierLogo" width="500" height="500" viewBox="0 0 500 500" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M364.932 49.2627H374.907C390.52 49.2627 403.098 61.8401 403.098 77.4535V329.87C403.098 345.483 390.52 358.061 374.907 358.061H125.093C109.48 358.061 96.9021 345.483 96.9021 329.87V77.8872C96.9021 62.2738 109.48 49.6964 125.093 49.6964H135.068H364.932V49.2627Z" fill="#DEF3F9"/>
          <path d="M374.907 49.2627H364.932H135.068H125.093C109.48 49.2627 96.9021 61.8401 96.9021 77.4535V120.39H402.664V77.8872C403.098 62.2738 390.52 49.2627 374.907 49.2627Z" fill="#76BDD3"/>
          <path d="M165.861 62.2739C165.861 70.948 158.922 77.8872 150.248 77.8872C141.574 77.8872 134.634 70.948 134.634 62.2739V50.1301V36.6853C134.634 28.0111 141.574 21.0719 150.248 21.0719C158.922 21.0719 165.861 28.0111 165.861 36.6853V62.2739Z" fill="#76BDD3"/>
          <path d="M364.932 62.2739C364.932 70.948 357.993 77.8872 349.318 77.8872C340.644 77.8872 333.705 70.948 333.705 62.2739V36.6853C333.705 28.0111 340.644 21.0719 349.318 21.0719C357.993 21.0719 364.932 28.0111 364.932 36.6853V62.2739Z" fill="#76BDD3"/>
          <path d="M150.682 15C138.972 15 128.996 24.5415 128.996 36.6853V43.1908H125.093C106.444 43.1908 90.8302 58.8042 90.8302 77.8872V330.304C90.8302 349.387 106.01 365 125.093 365H374.907C393.556 365 409.17 349.387 409.17 330.304V77.8872C409.17 58.8042 393.99 43.1908 374.907 43.1908H371.004V36.6853C371.004 24.5415 361.462 15 349.318 15C337.608 15 327.633 24.5415 327.633 36.6853V43.1908H171.933V36.6853C171.933 24.5415 162.392 15 150.682 15ZM150.682 27.1437C155.886 27.1437 160.223 31.4808 160.223 36.6853V62.2739C160.223 67.4783 155.886 71.8154 150.682 71.8154C145.477 71.8154 141.14 67.4783 141.14 62.2739V49.6964V37.119C141.14 31.4808 145.477 27.1437 150.682 27.1437ZM374.907 352.423H125.093C112.949 352.423 102.974 342.447 102.974 330.304V126.462H396.592V330.304C397.026 342.447 387.051 352.423 374.907 352.423ZM349.318 27.1437C354.523 27.1437 358.86 31.4808 358.86 36.6853V62.2739C358.86 67.4783 354.523 71.8154 349.318 71.8154C344.114 71.8154 339.777 67.4783 339.777 62.2739V49.6964V37.119C340.211 31.4808 344.114 27.1437 349.318 27.1437ZM328.067 55.3346V61.8401C328.067 73.9839 337.608 83.5254 349.752 83.5254C361.462 83.5254 371.437 73.9839 371.437 61.8401V55.3346H375.341C387.484 55.3346 397.46 65.3098 397.46 77.4535V113.885H102.974V77.4535C102.974 65.3098 112.949 55.3346 125.093 55.3346H128.996V61.8401C128.996 73.9839 138.538 83.5254 150.682 83.5254C162.392 83.5254 172.367 73.9839 172.367 61.8401V55.3346H328.067Z" fill="#427C7F"/>
          <path d="M132.9 193.686H162.825C166.295 193.686 168.897 191.084 168.897 187.615C168.897 184.145 166.295 181.543 162.825 181.543H132.9C129.43 181.543 126.828 184.145 126.828 187.615C126.828 190.651 129.43 193.686 132.9 193.686Z" fill="#427C7F"/>
          <path d="M182.776 193.686H212.701C216.171 193.686 218.773 191.084 218.773 187.615C218.773 184.145 216.171 181.543 212.701 181.543H182.776C179.306 181.543 176.704 184.145 176.704 187.615C176.704 190.651 179.306 193.686 182.776 193.686Z" fill="#427C7F"/>
          <path d="M232.218 193.686H262.144C265.613 193.686 268.216 191.084 268.216 187.615C268.216 184.145 265.613 181.543 262.144 181.543H232.218C228.748 181.543 226.146 184.145 226.146 187.615C226.146 190.651 229.182 193.686 232.218 193.686Z" fill="#427C7F"/>
          <path d="M282.094 193.686H312.02C315.489 193.686 318.092 191.084 318.092 187.615C318.092 184.145 315.489 181.543 312.02 181.543H282.094C278.625 181.543 276.022 184.145 276.022 187.615C276.022 190.651 278.625 193.686 282.094 193.686Z" fill="#427C7F"/>
          <path d="M331.537 193.686H361.462C364.932 193.686 367.534 191.084 367.534 187.615C367.534 184.145 364.932 181.543 361.462 181.543H331.537C328.067 181.543 325.465 184.145 325.465 187.615C325.898 190.651 328.501 193.686 331.537 193.686Z" fill="#427C7F"/>
          <path d="M164.56 215.372H134.634C131.165 215.372 128.563 217.974 128.563 221.444C128.563 224.913 131.165 227.516 134.634 227.516H164.56C168.03 227.516 170.632 224.913 170.632 221.444C170.632 217.974 167.596 215.372 164.56 215.372Z" fill="#427C7F"/>
          <path d="M214.002 215.372H184.077C180.607 215.372 178.005 217.974 178.005 221.444C178.005 224.913 180.607 227.516 184.077 227.516H214.002C217.472 227.516 220.074 224.913 220.074 221.444C220.074 217.974 217.472 215.372 214.002 215.372Z" fill="#427C7F"/>
          <path d="M263.879 215.372H233.953C230.483 215.372 227.881 217.974 227.881 221.444C227.881 224.913 230.483 227.516 233.953 227.516H263.879C267.348 227.516 269.95 224.913 269.95 221.444C269.95 217.974 267.348 215.372 263.879 215.372Z" fill="#427C7F"/>
          <path d="M313.321 215.372H283.395C279.926 215.372 277.323 217.974 277.323 221.444C277.323 224.913 279.926 227.516 283.395 227.516H313.321C316.791 227.516 319.393 224.913 319.393 221.444C319.393 217.974 316.791 215.372 313.321 215.372Z" fill="#427C7F"/>
          <path d="M363.197 215.372H333.271C329.802 215.372 327.2 217.974 327.2 221.444C327.2 224.913 329.802 227.516 333.271 227.516H363.197C366.667 227.516 369.269 224.913 369.269 221.444C369.269 217.974 366.667 215.372 363.197 215.372Z" fill="#427C7F"/>
          <path d="M159.789 283.463H129.864C126.394 283.463 123.792 286.066 123.792 289.535C123.792 293.005 126.394 295.607 129.864 295.607H159.789C163.259 295.607 165.861 293.005 165.861 289.535C165.861 286.066 163.259 283.463 159.789 283.463Z" fill="#427C7F"/>
          <path d="M209.665 283.463H179.74C176.27 283.463 173.668 286.066 173.668 289.535C173.668 293.005 176.27 295.607 179.74 295.607H209.665C213.135 295.607 215.737 293.005 215.737 289.535C215.737 286.066 212.701 283.463 209.665 283.463Z" fill="#427C7F"/>
          <path d="M259.108 283.463H229.182C225.713 283.463 223.11 286.066 223.11 289.535C223.11 293.005 225.713 295.607 229.182 295.607H259.108C262.577 295.607 265.18 293.005 265.18 289.535C265.18 286.066 262.577 283.463 259.108 283.463Z" fill="#427C7F"/>
          <path d="M159.789 249.634H129.864C126.394 249.634 123.792 252.237 123.792 255.706C123.792 259.176 126.394 261.778 129.864 261.778H159.789C163.259 261.778 165.861 259.176 165.861 255.706C165.861 252.237 163.259 249.634 159.789 249.634Z" fill="#427C7F"/>
          <path d="M209.665 249.634H179.74C176.27 249.634 173.668 252.237 173.668 255.706C173.668 259.176 176.27 261.778 179.74 261.778H209.665C213.135 261.778 215.737 259.176 215.737 255.706C215.737 252.237 212.701 249.634 209.665 249.634Z" fill="#427C7F"/>
          <path d="M259.108 249.634H229.182C225.713 249.634 223.11 252.237 223.11 255.706C223.11 259.176 225.713 261.778 229.182 261.778H259.108C262.577 261.778 265.18 259.176 265.18 255.706C265.18 252.237 262.577 249.634 259.108 249.634Z" fill="#427C7F"/>
          <path d="M308.984 249.634H279.058C275.589 249.634 272.986 252.237 272.986 255.706C272.986 259.176 275.589 261.778 279.058 261.778H308.984C312.454 261.778 315.056 259.176 315.056 255.706C315.056 252.237 312.454 249.634 308.984 249.634Z" fill="#427C7F"/>
          <path d="M358.426 249.634H328.501C325.031 249.634 322.429 252.237 322.429 255.706C322.429 259.176 325.031 261.778 328.501 261.778H358.426C361.896 261.778 364.498 259.176 364.498 255.706C364.498 252.237 361.896 249.634 358.426 249.634Z" fill="#427C7F"/>
          <path d="M90.5863 433C90.5863 428.88 91.5063 425.2 93.3463 421.96C95.2263 418.68 97.7663 416.14 100.966 414.34C104.206 412.5 107.826 411.58 111.826 411.58C116.506 411.58 120.606 412.78 124.126 415.18C127.646 417.58 130.106 420.9 131.506 425.14H121.846C120.886 423.14 119.526 421.64 117.766 420.64C116.046 419.64 114.046 419.14 111.766 419.14C109.326 419.14 107.146 419.72 105.226 420.88C103.346 422 101.866 423.6 100.786 425.68C99.7463 427.76 99.2263 430.2 99.2263 433C99.2263 435.76 99.7463 438.2 100.786 440.32C101.866 442.4 103.346 444.02 105.226 445.18C107.146 446.3 109.326 446.86 111.766 446.86C114.046 446.86 116.046 446.36 117.766 445.36C119.526 444.32 120.886 442.8 121.846 440.8H131.506C130.106 445.08 127.646 448.42 124.126 450.82C120.646 453.18 116.546 454.36 111.826 454.36C107.826 454.36 104.206 453.46 100.966 451.66C97.7663 449.82 95.2263 447.28 93.3463 444.04C91.5063 440.8 90.5863 437.12 90.5863 433ZM136.521 437.26C136.521 433.9 137.181 430.92 138.501 428.32C139.861 425.72 141.681 423.72 143.961 422.32C146.281 420.92 148.861 420.22 151.701 420.22C154.181 420.22 156.341 420.72 158.181 421.72C160.061 422.72 161.561 423.98 162.681 425.5V420.76H171.141V454H162.681V449.14C161.601 450.7 160.101 452 158.181 453.04C156.301 454.04 154.121 454.54 151.641 454.54C148.841 454.54 146.281 453.82 143.961 452.38C141.681 450.94 139.861 448.92 138.501 446.32C137.181 443.68 136.521 440.66 136.521 437.26ZM162.681 437.38C162.681 435.34 162.281 433.6 161.481 432.16C160.681 430.68 159.601 429.56 158.241 428.8C156.881 428 155.421 427.6 153.861 427.6C152.301 427.6 150.861 427.98 149.541 428.74C148.221 429.5 147.141 430.62 146.301 432.1C145.501 433.54 145.101 435.26 145.101 437.26C145.101 439.26 145.501 441.02 146.301 442.54C147.141 444.02 148.221 445.16 149.541 445.96C150.901 446.76 152.341 447.16 153.861 447.16C155.421 447.16 156.881 446.78 158.241 446.02C159.601 445.22 160.681 444.1 161.481 442.66C162.281 441.18 162.681 439.42 162.681 437.38ZM187.745 409.6V454H179.345V409.6H187.745ZM226.944 436.66C226.944 437.86 226.864 438.94 226.704 439.9H202.404C202.604 442.3 203.444 444.18 204.924 445.54C206.404 446.9 208.224 447.58 210.384 447.58C213.504 447.58 215.724 446.24 217.044 443.56H226.104C225.144 446.76 223.304 449.4 220.584 451.48C217.864 453.52 214.524 454.54 210.564 454.54C207.364 454.54 204.484 453.84 201.924 452.44C199.404 451 197.424 448.98 195.984 446.38C194.584 443.78 193.884 440.78 193.884 437.38C193.884 433.94 194.584 430.92 195.984 428.32C197.384 425.72 199.344 423.72 201.864 422.32C204.384 420.92 207.284 420.22 210.564 420.22C213.724 420.22 216.544 420.9 219.024 422.26C221.544 423.62 223.484 425.56 224.844 428.08C226.244 430.56 226.944 433.42 226.944 436.66ZM218.244 434.26C218.204 432.1 217.424 430.38 215.904 429.1C214.384 427.78 212.524 427.12 210.324 427.12C208.244 427.12 206.484 427.76 205.044 429.04C203.644 430.28 202.784 432.02 202.464 434.26H218.244ZM251.496 420.28C255.456 420.28 258.656 421.54 261.096 424.06C263.536 426.54 264.756 430.02 264.756 434.5V454H256.356V435.64C256.356 433 255.696 430.98 254.376 429.58C253.056 428.14 251.256 427.42 248.976 427.42C246.656 427.42 244.816 428.14 243.456 429.58C242.136 430.98 241.476 433 241.476 435.64V454H233.076V420.76H241.476V424.9C242.596 423.46 244.016 422.34 245.736 421.54C247.496 420.7 249.416 420.28 251.496 420.28ZM270.584 437.26C270.584 433.9 271.244 430.92 272.564 428.32C273.924 425.72 275.764 423.72 278.084 422.32C280.404 420.92 282.984 420.22 285.824 420.22C287.984 420.22 290.044 420.7 292.004 421.66C293.964 422.58 295.524 423.82 296.684 425.38V409.6H305.204V454H296.684V449.08C295.644 450.72 294.184 452.04 292.304 453.04C290.424 454.04 288.244 454.54 285.764 454.54C282.964 454.54 280.404 453.82 278.084 452.38C275.764 450.94 273.924 448.92 272.564 446.32C271.244 443.68 270.584 440.66 270.584 437.26ZM296.744 437.38C296.744 435.34 296.344 433.6 295.544 432.16C294.744 430.68 293.664 429.56 292.304 428.8C290.944 428 289.484 427.6 287.924 427.6C286.364 427.6 284.924 427.98 283.604 428.74C282.284 429.5 281.204 430.62 280.364 432.1C279.564 433.54 279.164 435.26 279.164 437.26C279.164 439.26 279.564 441.02 280.364 442.54C281.204 444.02 282.284 445.16 283.604 445.96C284.964 446.76 286.404 447.16 287.924 447.16C289.484 447.16 290.944 446.78 292.304 446.02C293.664 445.22 294.744 444.1 295.544 442.66C296.344 441.18 296.744 439.42 296.744 437.38ZM321.808 425.92C322.888 424.16 324.288 422.78 326.008 421.78C327.768 420.78 329.768 420.28 332.008 420.28V429.1H329.788C327.148 429.1 325.148 429.72 323.788 430.96C322.468 432.2 321.808 434.36 321.808 437.44V454H313.408V420.76H321.808V425.92ZM341.925 416.8C340.445 416.8 339.205 416.34 338.205 415.42C337.245 414.46 336.765 413.28 336.765 411.88C336.765 410.48 337.245 409.32 338.205 408.4C339.205 407.44 340.445 406.96 341.925 406.96C343.405 406.96 344.625 407.44 345.585 408.4C346.585 409.32 347.085 410.48 347.085 411.88C347.085 413.28 346.585 414.46 345.585 415.42C344.625 416.34 343.405 416.8 341.925 416.8ZM346.065 420.76V454H337.665V420.76H346.065ZM385.265 436.66C385.265 437.86 385.185 438.94 385.025 439.9H360.725C360.925 442.3 361.765 444.18 363.245 445.54C364.725 446.9 366.545 447.58 368.705 447.58C371.825 447.58 374.045 446.24 375.365 443.56H384.425C383.465 446.76 381.625 449.4 378.905 451.48C376.185 453.52 372.845 454.54 368.885 454.54C365.685 454.54 362.805 453.84 360.245 452.44C357.725 451 355.745 448.98 354.305 446.38C352.905 443.78 352.205 440.78 352.205 437.38C352.205 433.94 352.905 430.92 354.305 428.32C355.705 425.72 357.665 423.72 360.185 422.32C362.705 420.92 365.605 420.22 368.885 420.22C372.045 420.22 374.865 420.9 377.345 422.26C379.865 423.62 381.805 425.56 383.165 428.08C384.565 430.56 385.265 433.42 385.265 436.66ZM376.565 434.26C376.525 432.1 375.745 430.38 374.225 429.1C372.705 427.78 370.845 427.12 368.645 427.12C366.565 427.12 364.805 427.76 363.365 429.04C361.965 430.28 361.105 432.02 360.785 434.26H376.565ZM399.796 425.92C400.876 424.16 402.276 422.78 403.996 421.78C405.756 420.78 407.756 420.28 409.996 420.28V429.1H407.776C405.136 429.1 403.136 429.72 401.776 430.96C400.456 432.2 399.796 434.36 399.796 437.44V454H391.396V420.76H399.796V425.92Z" fill="#427C7F"/>
        </svg>

        <div className="ThirdPartyContainer" id="LeftThirdPartyContainer">

          <button type="button">
            <div className="ThirdPartyLogoContainer">
              <img src={googleLogo} alt="google logo" />
            </div>
            <p>Google</p>
          </button>

          <button type="button">
            <div className="ThirdPartyLogoContainer">
              <img src={facebookLogo} alt="facebook logo" />
            </div>
            <p>Facebook</p>
          </button>

        </div>

        <p id="LoginInstructions">swipe up to login</p>

      </div>
      <div id="Right">

        <div id="TitleContainer">
          <p>Login</p>
        </div>

        <form onSubmit={e => { handleFormSubmit(e) }}>

          <div id="EmailInput" className="LoginInput">
            <User className="LoginInputIcon" size={60} />
            <input
              value={email}
              onChange={e => setEmail(e.target.value)}
              type="email"
              placeholder="e-mail"
            />
          </div>

          <div id="PasswordInput" className="LoginInput">
            <Lock className="LoginInputIcon" size={60}/>
            <input
              type={ seePassword ? 'text' : 'password'}
              minLength={8}
              value={password}
              onChange={e => setPassword(e.target.value)}
              placeholder="password"
            />

            {
              !seePassword &&
              <Eye
                className="LoginInputIcon"
                id="PasswordViewIcon"
                size={60}
                onClick={() => setSeePassword(!seePassword) }
              />
            }

            {
              seePassword &&
              <EyeOff
                className="LoginInputIcon"
                id="PasswordViewIcon"
                size={60}
                onClick={() => setSeePassword(!seePassword) }
              />
            }
          </div>

          {
            errorMessage !== '' &&
            <div id="ErrorMessage">
              {errorMessage}
            </div>
          }

          <div id="RememberBox" >
            {
              !rememberPassword &&
              <>
                <Square
                  id="SquareIcon"
                  onClick={() => setRememberPassword(!rememberPassword) }
                />
                <p
                  onClick={() => setRememberPassword(!rememberPassword) }
                >
                  Remember password
                </p>
              </>
            }

            {
              rememberPassword &&
              <>
                <CheckSquare
                  id="SquareIcon"
                  onClick={() => setRememberPassword(!rememberPassword) }
                />
                <p
                  onClick={() => setRememberPassword(!rememberPassword) }
                >
                  Remember password
                </p>
              </>
            }
          </div>

          <button id="LogInButton" type="submit">
            <LogIn id="LogInButtonIcon" size={60} />
            <p>Log In</p>
          </button>

          <button className="ThirdPartyButton" type="button">
            <div className="ThirdPartyLogoContainer">
              <img src={googleLogo} alt="google logo" />
            </div>
            <p>Google</p>
          </button>

          <button className="ThirdPartyButton" type="button">
            <div className="ThirdPartyLogoContainer">
              <img src={facebookLogo} alt="facebook logo" />
            </div>
            <p>Facebook</p>
          </button>

        </form>

        <div id="CreateAnAccountButtonContainer">
          <Link to="/signup">Create an Account</Link>
        </div>
      </div>

      {/* <a href="https://iconscout.com/icons/google" target="_blank">Google Icon</a> by <a href="https://iconscout.com/contributors/icon-mafia">Icon Mafia</a> on <a href="https://iconscout.com">Iconscout</a> */}
      {/* <a href="https://iconscout.com/icons/facebook" target="_blank">Facebook Icon</a> on <a href="https://iconscout.com">Iconscout</a> */}

    </div>
  )
}

export default LoginPage
